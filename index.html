<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/27/Advance-Python-Topics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng Xing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/27/Advance-Python-Topics/" itemprop="url">Advance Python Topics</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-27T20:56:04-07:00">
                2018-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/27/Advance-Python-Topics/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/03/27/Advance-Python-Topics/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Note: 这篇文章主要是对下面这本书(《Powerful Python》2nd edition, Aaron Maxwell)的总结。</p>
<h2 id="Scaling-with-Generators"><a href="#Scaling-with-Generators" class="headerlink" title="Scaling with Generators"></a>Scaling with Generators</h2><p>generator 不同于一般的一个 list，它是lazy execution，里面的元素用到的时候才会运算取出来。<br>但是要注意，generator 只能用一次，用过以后其位置就跑到了最后面了。</p>
<h3 id="使用-iter-获得一个-generator"><a href="#使用-iter-获得一个-generator" class="headerlink" title="使用 iter() 获得一个 generator"></a>使用 iter() 获得一个 generator</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br><span class="line">nums_iter = iter(nums)  <span class="comment"># nums_iter 是 generator</span></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> nums_iter:</span><br><span class="line">  print(num)</span><br><span class="line"><span class="comment">## 上面这个 for loop 第一次执行，会输出 1 到 10。此时 iterator 'nums_iter' 已经指向最后一个数字了。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 此时在运行下面这个 for loop 不会输出任何东西，</span></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> nums_iter:</span><br><span class="line">  print(num)</span><br><span class="line">  </span><br><span class="line"><span class="comment">## 同样的，此时如果执行 next(nums_iter) 则会报错</span></span><br></pre></td></tr></table></figure>
<h3 id="使用-generator-的好处："><a href="#使用-generator-的好处：" class="headerlink" title="使用 generator 的好处："></a>使用 generator 的好处：</h3><ol>
<li>程序运行更加 smooth，不会说要等待一个很大的东西(list, tuple, dictionary)生成以后才会继续执行，可以让用户持续不断地看到结果输出来，不会感觉程序“好像卡住了”。(参考下面的例子)</li>
<li>内存使用量减少</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 方案-1. 毫无效率的版本</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen_nums</span><span class="params">()</span>:</span></span><br><span class="line">  res = []</span><br><span class="line">  n = <span class="number">0</span></span><br><span class="line">  <span class="keyword">while</span> n &lt; <span class="number">4</span>:</span><br><span class="line">    res.append(n)</span><br><span class="line">    n += <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> gen_nums():</span><br><span class="line">  print(num)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 方案-1 的分析：for loop 里调用 gen_nums() 会先生成一个 list，然后才会执行 loop 那个 list。</span></span><br><span class="line"><span class="comment">## 如果需要生成的 list 很大，那么不仅内存占用高，</span></span><br><span class="line"><span class="comment">## 而且用户必须等到 list 生成好以后，才能看到数字本输出来。</span></span><br><span class="line"><span class="comment">## 如果要是网站后台有这种程序，用户就会感觉到网页非常的卡顿，</span></span><br><span class="line"><span class="comment">## 会吐槽设计网页的程序员很屎。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2. 使用 generator function 优化后的版本</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen_nums</span><span class="params">()</span>:</span></span><br><span class="line">  n = <span class="number">0</span></span><br><span class="line">  <span class="keyword">while</span> n&lt;<span class="number">4</span>:</span><br><span class="line">    <span class="keyword">yield</span> n</span><br><span class="line">    n += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> gen_nums():</span><br><span class="line">  print(num)</span><br><span class="line">  </span><br><span class="line"><span class="comment">## 2 的分析：</span></span><br><span class="line"><span class="comment">## generator function 不同于一般的 function。</span></span><br><span class="line"><span class="comment">## 它有很多个 entry point，但是只有一个 exit point.</span></span><br><span class="line"><span class="comment">## 每次执行完 yield 后，会暂时退出，下次再进来从 yield</span></span><br><span class="line"><span class="comment">## 的后面一句开始执行。</span></span><br></pre></td></tr></table></figure>
<h3 id="range-vs-xrange"><a href="#range-vs-xrange" class="headerlink" title="range vs xrange"></a><strong>range</strong> vs <strong>xrange</strong></h3><ul>
<li>python2: xrange 返回一个 iterator, range 返回一个 list</li>
<li>python3: range 返回一个 iterator<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen_squares</span><span class="params">(max_num)</span>:</span></span><br><span class="line">  <span class="keyword">for</span> num <span class="keyword">in</span> range(max_num):</span><br><span class="line">    <span class="keyword">yield</span> num ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line">MAX = <span class="number">5</span></span><br><span class="line"><span class="keyword">for</span> square <span class="keyword">in</span> gen_squares(MAX):</span><br><span class="line">  print(square)</span><br><span class="line">  </span><br><span class="line"><span class="comment">## 这个程序在 python2 环境下有问题，python3 下没有问题。</span></span><br><span class="line"><span class="comment">## 你看出来了吗？</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="iterator-vs-iterable"><a href="#iterator-vs-iterable" class="headerlink" title="iterator vs iterable"></a><strong>iterator</strong> vs <strong>iterable</strong></h3><ol>
<li>iterator 是一个可以传给 next() 的东西，或者可以再 for loop 里调用一次。</li>
<li>更准确的说，满足以下条件才是 iterator<ol>
<li>有一个 __next__ 方法</li>
<li>每次调用 __next__ 方法，会产生序列里的下一个 item</li>
<li>一点序列里所有 items 都被产生，再次调用 __next__ 会报错</li>
<li>有一个 __iter__ 方法，调用后返回本身 self.</li>
</ol>
</li>
<li>而一个 iterable object 需要满足下面两个条件的其中一个：<ol>
<li>It defines a method called __iter__()，用来产生并返回一个 iterator 可以遍历 container 里所有 items.</li>
<li>It follows the sequence protocol. 亦即，定义了 __getitem__ 方法，亦即可以使用方括号来获取 item (foo[2]).</li>
</ol>
</li>
<li>注意到 iterator 和 iterable object 都定义了 __iter__ 方法。这是有意为之的，为了保证 for loop 在这两类 object 上的语法是一样的。每次碰到 for loop，它都会先 invoking iter(sequence), which 一定会返回一个 iterator，而不管本来的 sequence 是一个 iterator 还是一个 iterable object.</li>
</ol>
<h3 id="多重-generator-function-嵌套"><a href="#多重-generator-function-嵌套" class="headerlink" title="多重 generator function 嵌套"></a>多重 generator function 嵌套</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">matching_lines_from_file</span><span class="params">(path, pattern)</span>:</span></span><br><span class="line">  <span class="keyword">with</span> open(path) <span class="keyword">as</span> handle:</span><br><span class="line">    <span class="comment"># for line in handle.readlines() 千万不要用这一句</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> handle:</span><br><span class="line">      <span class="keyword">if</span> pattern <span class="keyword">in</span> line:</span><br><span class="line">        <span class="keyword">yield</span> line.rstrip(<span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 1. 强烈推荐使用 with 语句来打开文件，当 with 语句结束后，文件会自动关闭。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2. "for line in handle" 不错，每次从 test 文件中读取一行！！！不是一下子全部读进来，那样会很费时间。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 3. .readlines() 这句话会读入整个文件，返回一个 list of strings, one string per line. 很明显，费时间费空间。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 4. 下面函数的输入 'lines' 可以是一个 iterator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_log_records</span><span class="params">(lines)</span>:</span></span><br><span class="line">  <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">    level, message = line.split(<span class="string">": "</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">yield</span> &#123;<span class="string">"level"</span>: level, <span class="string">"message"</span>: message&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 5. 用法</span></span><br><span class="line">log_lines = matching_lines_from_file(<span class="string">"log.txt"</span>, <span class="string">"WARNING:"</span>)</span><br><span class="line"><span class="comment"># 上一句log_lines 是一个 generator function 的结果</span></span><br><span class="line"><span class="comment"># 下一句 parse_log_records() 也是一个 generator function</span></span><br><span class="line"><span class="keyword">for</span> record <span class="keyword">in</span> parse_log_records(log_lines):</span><br><span class="line">  <span class="comment"># record is a dict</span></span><br><span class="line">  print(record)</span><br></pre></td></tr></table></figure>
<h3 id="views-in-python3"><a href="#views-in-python3" class="headerlink" title="views in python3"></a>views in python3</h3><ol>
<li>如果 calories 是一个 dict</li>
<li>items = calories.items() 是一个 view，支持<ol>
<li>len(view)</li>
<li>iter(view)</li>
<li>(key, value) in view 判断是否在 view 里面</li>
</ol>
</li>
<li>既然 items 是一个 view，因此如果你要接下来修改了 calories 的内容，view “看到” 的是新的 calories dict.</li>
<li>同理，.keys(), .values() 也是返回 view</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The built-in map, filter, and zip functions all return iterators:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>big_numbers = [<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">double</span><span class="params">(n)</span>:</span></span><br><span class="line"><span class="meta">... </span><span class="keyword">return</span> <span class="number">2</span> * n</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">is_even</span><span class="params">(n)</span>:</span></span><br><span class="line"><span class="meta">... </span><span class="keyword">return</span> n % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mapped = map(double, numbers)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mapped</span><br><span class="line">&lt;map object at <span class="number">0x1013ac518</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> num <span class="keyword">in</span> mapped: print(num)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>filtered = filter(is_even, numbers)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>filtered</span><br><span class="line">&lt;filter object at <span class="number">0x1013ac668</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> num <span class="keyword">in</span> filtered: print(num)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zipped = zip(numbers, big_numbers)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zipped</span><br><span class="line">&lt;zip object at <span class="number">0x1013a9608</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> pair <span class="keyword">in</span> zipped: print(pair)</span><br><span class="line">(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="number">200</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="number">300</span>)</span><br></pre></td></tr></table></figure>
<h3 id="注意-view-in-python2"><a href="#注意-view-in-python2" class="headerlink" title="注意 view in python2"></a>注意 view in python2</h3><ol>
<li>items() 返回的是 a list of key-value tuples, 不是 view 哦。</li>
<li>viewitems() 才是返回 view.</li>
<li>同理，建议使用 viewkeys() 和 viewvalues()</li>
</ol>
<h2 id="Creating-collections-with-comprehensions"><a href="#Creating-collections-with-comprehensions" class="headerlink" title="Creating collections with comprehensions"></a>Creating collections with comprehensions</h2><h3 id="最简单-list-comprehension"><a href="#最简单-list-comprehension" class="headerlink" title="最简单 list comprehension"></a>最简单 list comprehension</h3><ol>
<li>模板：[EXPRESSION for VARIABLE in SEQUENCE]</li>
<li>带 filter 的模板：[EXPRESSION for VARIABLE in SEQUENCE if CONDITION]</li>
<li>EXPRESSION 可以使任何表达式<ol>
<li>算术 n+3</li>
<li>function call f(n)</li>
<li>slice operation (like s[::-1], to reverse a string)</li>
<li>method call (foo.bar(), iterating over a sequence of objects)</li>
</ol>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pets = [<span class="string">"dog"</span>, <span class="string">"parakeet"</span>, <span class="string">"cat"</span>, <span class="string">"llama"</span>]</span><br><span class="line">numbers = [ <span class="number">9</span>, <span class="number">-1</span>, <span class="number">-4</span>, <span class="number">20</span>, <span class="number">11</span>, <span class="number">-3</span> ]</span><br><span class="line">words = [<span class="string">"bib"</span>, <span class="string">"bias"</span>, <span class="string">"dad"</span>, <span class="string">"eye"</span>, <span class="string">"deed"</span>, <span class="string">"tooth"</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">repeat</span><span class="params">(s)</span>:</span></span><br><span class="line">  <span class="keyword">return</span> s + s</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_palindrome</span><span class="params">(s)</span>:</span></span><br><span class="line">  <span class="keyword">return</span> s == s[::<span class="number">-1</span>]</span><br><span class="line">  </span><br><span class="line">[ <span class="number">2</span>*m+<span class="number">3</span> <span class="keyword">for</span> m <span class="keyword">in</span> range(<span class="number">10</span>, <span class="number">20</span>, <span class="number">2</span>) ]</span><br><span class="line">[abs(num) <span class="keyword">for</span> num <span class="keyword">in</span> numbers ]</span><br><span class="line">[ pet.upper() <span class="keyword">for</span> pet <span class="keyword">in</span> pets ]</span><br><span class="line">[ repeat(pet) <span class="keyword">for</span> pet <span class="keyword">in</span> pets ]</span><br><span class="line">[ word <span class="keyword">for</span> word <span class="keyword">in</span> words <span class="keyword">if</span> is_palindrome(word) ]</span><br></pre></td></tr></table></figure>
<h3 id="what-about-long-list-comprehension"><a href="#what-about-long-list-comprehension" class="headerlink" title="what about long list comprehension"></a>what about long list comprehension</h3><p>对于比较长的 list comprehension, 可以分几行来写。把三个逻辑不同的语句分开写，pre-parsed, 读起来方便，对于 version control and code review 也方便。比如我在一个 branch 里改了 “word + word + word”, 有一个其他人改了 “len(word) &lt; 3”, version control tools 可以自动 merge 这些改动。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">double_short_words</span><span class="params">(words)</span>:</span></span><br><span class="line">  <span class="keyword">return</span> [ word + word</span><br><span class="line">           <span class="keyword">for</span> word <span class="keyword">in</span> words</span><br><span class="line">           <span class="keyword">if</span> len(word) &lt; <span class="number">5</span> ]</span><br></pre></td></tr></table></figure></p>
<h3 id="多个-for-语句和-if-语句-in-comprehension"><a href="#多个-for-语句和-if-语句-in-comprehension" class="headerlink" title="多个 for 语句和 if 语句 in comprehension"></a>多个 for 语句和 if 语句 in comprehension</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">colors = [<span class="string">"green"</span>, <span class="string">"red"</span>, <span class="string">"blue"</span>]</span><br><span class="line">toys = [<span class="string">"bike"</span>, <span class="string">"car"</span>, <span class="string">"boat"</span>]</span><br><span class="line"></span><br><span class="line">[ color + <span class="string">" "</span> + toy</span><br><span class="line">  <span class="keyword">for</span> color <span class="keyword">in</span> colors</span><br><span class="line">  <span class="keyword">for</span> toy <span class="keyword">in</span> toys ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># example-2</span></span><br><span class="line">numbers = [ <span class="number">9</span>, <span class="number">-1</span>, <span class="number">-4</span>, <span class="number">20</span>, <span class="number">17</span>, <span class="number">-3</span> ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>odd_positives = [</span><br><span class="line"><span class="meta">... </span>num <span class="keyword">for</span> num <span class="keyword">in</span> numbers</span><br><span class="line"><span class="meta">... </span><span class="keyword">if</span> num &gt; <span class="number">0</span></span><br><span class="line"><span class="meta">... </span><span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">1</span></span><br><span class="line"><span class="meta">... </span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(odd_positives)</span><br><span class="line">[<span class="number">9</span>, <span class="number">17</span>]</span><br></pre></td></tr></table></figure>
<h3 id="scalable-generator-expression-来代替-list-comprehension"><a href="#scalable-generator-expression-来代替-list-comprehension" class="headerlink" title="scalable generator expression 来代替 list comprehension"></a>scalable generator expression 来代替 <strong>list comprehension</strong></h3><ol>
<li>只需要把 list comprehension 表达式中的方括号换成圆括号就好了。</li>
<li>generator expression 作为函数参数时候，可以去掉中间那个圆括号<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">generated_squares = ( n**<span class="number">2</span> <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">100</span>) )</span><br><span class="line"></span><br><span class="line">sorted((user.email <span class="keyword">for</span> user <span class="keyword">in</span> all_users <span class="keyword">if</span> user.is_active))</span><br><span class="line"><span class="comment"># Omitting the inner parentheses.</span></span><br><span class="line"><span class="comment"># Still passing in a generator expression!</span></span><br><span class="line">sorted(user.email <span class="keyword">for</span> user <span class="keyword">in</span> all_users <span class="keyword">if</span> user.is_active)</span><br><span class="line">[<span class="string">'fred@a.com'</span>, <span class="string">'sandy@f.net'</span>, <span class="string">'tim@d.com'</span>]</span><br><span class="line"><span class="comment"># 但是要注意，如果函数有其他参数，就不能省略</span></span><br><span class="line">sorted((user.email <span class="keyword">for</span> user <span class="keyword">in</span> all_users <span class="keyword">if</span> user.is_active), reverse=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="comprehension-for-other-data-structures"><a href="#comprehension-for-other-data-structures" class="headerlink" title="comprehension for other data structures"></a>comprehension for other data structures</h3><p>注意！！！ Dictionaries, Sets, and Tuples 都有类似的 comprehension 的写法，但是如果需要 scalable solution，就之能定义 generator function 才行。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获得 dictionary</span></span><br><span class="line">&#123;student.name : student.gpa <span class="keyword">for</span> student <span class="keyword">in</span> students&#125;</span><br><span class="line"><span class="comment"># 获得 set 方法一</span></span><br><span class="line">&#123;student.major <span class="keyword">for</span> student <span class="keyword">in</span> students&#125;</span><br><span class="line"><span class="comment"># 获得 set 方法二</span></span><br><span class="line">set(student.major <span class="keyword">for</span> student <span class="keyword">in</span> students)</span><br><span class="line"><span class="comment"># 获得 tuple 只有一个方法</span></span><br><span class="line">tuple(student.gpa <span class="keyword">for</span> student <span class="keyword">in</span> students <span class="keyword">if</span> student.major == <span class="string">"CS"</span>)</span><br><span class="line"><span class="comment"># 这个获得 tuple 的方法不是 comprehension，实际上是把一个 generator 传递给了 tuple 的 constructor.</span></span><br></pre></td></tr></table></figure></p>
<h2 id="function-的高级使用技巧"><a href="#function-的高级使用技巧" class="headerlink" title="function 的高级使用技巧"></a>function 的高级使用技巧</h2><h3 id="可变数量的参数"><a href="#可变数量的参数" class="headerlink" title="可变数量的参数"></a>可变数量的参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">take_any_number_of_args</span><span class="params">(*args)</span>:</span></span><br><span class="line">  print(str(args))</span><br><span class="line"></span><br><span class="line"><span class="comment">## 这样子用，args 是一个 tuple</span></span><br><span class="line"></span><br><span class="line">takes_any_number_of_args([<span class="string">"first"</span>, <span class="string">"list"</span>], [<span class="string">"another"</span>, <span class="string">"list"</span>])</span><br><span class="line"><span class="comment"># args 是一个 tuple，里面有两个 list of two strings</span></span><br></pre></td></tr></table></figure>
<h3 id="argument-unpacking"><a href="#argument-unpacking" class="headerlink" title="argument unpacking"></a>argument unpacking</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 你有一个函数接受 3 个参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">some_function</span><span class="params">(a, b, c)</span>:</span></span><br><span class="line">  do_something_here</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 如果你有一个 tuple of three things, 你可以直接带入进去</span></span><br><span class="line">nums = (<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="comment"># some_function(nums[0], nums[1], nums[2]) 不需要这样子写</span></span><br><span class="line">some_function(*nums)</span><br></pre></td></tr></table></figure>
<h3 id="variable-keyword-arguments"><a href="#variable-keyword-arguments" class="headerlink" title="variable keyword arguments"></a>variable keyword arguments</h3><p>上面说的都是 positional arguments, 这里换一个 keyword arguments. (kwargs 就是 keyword argument 的缩写)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_kwargs</span><span class="params">(**kwargs)</span>:</span></span><br><span class="line">  <span class="keyword">for</span> key, val <span class="keyword">in</span> kwargs.items():</span><br><span class="line">    print(<span class="string">"&#123;&#125; -&gt; &#123;&#125;"</span>.format(key, val))</span><br><span class="line"><span class="comment"># 这个例子里面变量 kwargs 是一个 dictionary</span></span><br><span class="line"><span class="comment"># 因此我们可以用 items() 来遍历 key, val 组合。</span></span><br><span class="line"></span><br><span class="line">print_kwargs(hero=<span class="string">"Homer"</span>, antihero=<span class="string">"Bart"</span>, genius=<span class="string">"Lisa"</span>)</span><br><span class="line"><span class="comment"># 实际调用 print_kwargs 函数时候，给的带 “=” 的三个参数</span></span><br><span class="line"><span class="comment"># 都属于 keyword arguments, 会被函数定义中的 **kwargs 捕捉到。</span></span><br></pre></td></tr></table></figure></p>
<h3 id="positional-arguments-和-keyword-arguments-组合起来用"><a href="#positional-arguments-和-keyword-arguments-组合起来用" class="headerlink" title="positional arguments 和 keyword arguments 组合起来用"></a>positional arguments 和 keyword arguments 组合起来用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_config_defaults</span><span class="params">(config, **kwargs)</span>:</span></span><br><span class="line">  <span class="keyword">for</span> key, val <span class="keyword">in</span> kwargs.items():</span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> config:</span><br><span class="line">      config[key] = val</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>config = &#123;<span class="string">"verbosity"</span>: <span class="number">3</span>, <span class="string">"theme"</span>: <span class="string">"Blue Steel"</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>set_config_defaults(config, bass=<span class="number">11</span>, verbosity=<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>config</span><br><span class="line">&#123;<span class="string">'verbosity'</span>: <span class="number">3</span>, <span class="string">'theme'</span>: <span class="string">'Blue Steel'</span>, <span class="string">'bass'</span>: <span class="number">11</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里有一点要注意，python always pass the object itself, whether it's changed depends on the mutability of the objects.</span></span><br><span class="line"><span class="comment"># 因为 dictionary is mutable, 所以 config 内容改变了。</span></span><br></pre></td></tr></table></figure>
<h3 id="keyword-arguments-unpacking"><a href="#keyword-arguments-unpacking" class="headerlink" title="keyword arguments unpacking"></a>keyword arguments unpacking</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">normal_function</span><span class="params">(a, b, c)</span>:</span></span><br><span class="line"><span class="meta">... </span>print(<span class="string">"a: &#123;&#125; b: &#123;&#125; c: &#123;&#125;"</span>.format(a,b,c))</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numbers = &#123;<span class="string">"a"</span>: <span class="number">7</span>, <span class="string">"b"</span>: <span class="number">5</span>, <span class="string">"c"</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>normal_function(**numbers)</span><br><span class="line">a: <span class="number">7</span> b: <span class="number">5</span> c: <span class="number">3</span></span><br></pre></td></tr></table></figure>
<h3 id="functions-as-objects"><a href="#functions-as-objects" class="headerlink" title="functions as objects"></a><mark>functions as objects</mark></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">max_by_key</span><span class="params">(items, key)</span>:</span></span><br><span class="line"><span class="meta">... </span>  biggest = items[<span class="number">0</span>]</span><br><span class="line"><span class="meta">... </span>  <span class="keyword">for</span> item <span class="keyword">in</span> items[<span class="number">1</span>:]:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> key(item) &gt; key(biggest):</span><br><span class="line"><span class="meta">... </span>      biggest = item</span><br><span class="line"><span class="meta">... </span>  <span class="keyword">return</span> biggest</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这个定义里面那个 key 代表一个函数哦！！</span></span><br><span class="line"><span class="comment"># 例如，</span></span><br><span class="line">nums = [<span class="string">"7"</span>, <span class="string">"13"</span>, <span class="string">"25"</span>, <span class="string">"4"</span>]</span><br><span class="line">max_by_key(nums, int)</span><br><span class="line"><span class="comment"># 就是说用这些数字代表的数值来比较，而不是作为 string 来比较。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># python 自带的函数 min, max, sorted 也接受 key 变量。</span></span><br><span class="line">min(nums, key=int)</span><br><span class="line">sorted(nums, key=int)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 除了 int 这种系统自带的函数，也可以自定义函数。</span></span><br><span class="line">eric=&#123;<span class="string">"gpa"</span>:<span class="number">3.93</span>, <span class="string">"major"</span>:<span class="string">"geophysics"</span>, <span class="string">"name"</span>: <span class="string">"Eric"</span>&#125;</span><br><span class="line">...</span><br><span class="line">students = [eric, john, lisa]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_gpa</span><span class="params">(student)</span>:</span></span><br><span class="line">  <span class="keyword">return</span> student[<span class="string">"gpa"</span>]</span><br><span class="line">sorted(students, key=get_gpa)</span><br></pre></td></tr></table></figure>
<h3 id="接上面6，operator-module"><a href="#接上面6，operator-module" class="headerlink" title="接上面6，operator module"></a>接上面6，operator module</h3><p>operator 提供 itemgetter 函数可以构造新函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果每个 student 是一个 dictionary</span></span><br><span class="line">sorted(students, key=itemgetter(<span class="string">"gpa"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果每个 student 是一个 list or tuple</span></span><br><span class="line">sorted(students, key=itemgetter(<span class="number">2</span>))</span><br><span class="line"><span class="comment"># 此处 2 代表 index 是 2.</span></span><br></pre></td></tr></table></figure>
<p>operator 还提供 attrgetter, methodcaller 来给自定义的 class 使用。”operator also provides attrgetter, for keying off an attribute of the element, and methodcaller for keying off a method’s return value - useful when the sequence elements are instances of your own class”</p>
<h2 id="python-类-class"><a href="#python-类-class" class="headerlink" title="python 类 class"></a>python 类 class</h2><h3 id="private-public-members"><a href="#private-public-members" class="headerlink" title="private/public members"></a>private/public members</h3><p>Python 跟 C++ 不一样，不是使用 “private” 和 “public” 关键词才定义 methods 和 attributes 是否公开的。Python 里使用默认的下划线 _ 来说明一个 method 和 attribute 的性质。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 没有前置下划线就是 public</span></span><br><span class="line"><span class="comment"># 2. 单下划线的 method 或 attribute，在类定义中可以调用和访问，</span></span><br><span class="line"><span class="comment">#    类的实例可以直接访问，子类中可以访问；</span></span><br><span class="line"><span class="comment"># 3. 双下划线的函数或属性，在类定义中可以调用和访问，</span></span><br><span class="line"><span class="comment">#    类的实例不可以直接访问，子类不可访问。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 但是注意，虽然第 3 点说了 Python 不允许类的实例访问私有数据，</span></span><br><span class="line"><span class="comment">#    但是可以使用 object._className__attrName 来访问。</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span><span class="params">(object)</span>:</span>  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__private</span><span class="params">(self)</span>:</span>  </span><br><span class="line">        print(<span class="string">"private value in Base"</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_protected</span><span class="params">(self)</span>:</span>  </span><br><span class="line">        print(<span class="string">"protected value in Base"</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">public</span><span class="params">(self)</span>:</span>  </span><br><span class="line">        print(<span class="string">"public value in Base"</span>)  </span><br><span class="line">        self.__private()  </span><br><span class="line">        self._protected()  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span><span class="params">(Base)</span>:</span>  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__private</span><span class="params">(self)</span>:</span>  </span><br><span class="line">        print(<span class="string">"override private"</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_protected</span><span class="params">(self)</span>:</span>  </span><br><span class="line">        print(<span class="string">"override protected"</span>)  </span><br><span class="line">        </span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">In [103]: d = Derived()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [104]: d.__private()</span></span><br><span class="line"><span class="string">---------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">AttributeError                            Traceback (most recent call last)</span></span><br><span class="line"><span class="string">&lt;ipython-input-104-200093705fee&gt; in &lt;module&gt;()</span></span><br><span class="line"><span class="string">----&gt; 1 d.__private()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">AttributeError: 'Derived' object has no attribute '__private'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [105]: d._protected()</span></span><br><span class="line"><span class="string">override protected</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [106]: d.public()</span></span><br><span class="line"><span class="string">public value in Base</span></span><br><span class="line"><span class="string">private value in Base    # 注意这里，子类的私有方法没有执行，说明没法覆盖父类的。</span></span><br><span class="line"><span class="string">override protected      # 子类的 protected 方法执行了。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [107]: d._Base__private()</span></span><br><span class="line"><span class="string">private value in Base</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [108]: d._Base__private()</span></span><br><span class="line"><span class="string">private value in Base</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [109]: d._Derived__private()</span></span><br><span class="line"><span class="string">override private</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<h3 id="A-big-difference-between-python-2-and-3-when-writing-classes"><a href="#A-big-difference-between-python-2-and-3-when-writing-classes" class="headerlink" title="A big difference between python 2 and 3 when writing classes"></a>A big difference between python 2 and 3 when writing classes</h3><ol>
<li>In Python 2, you need to explicitly inherit your class from <strong>object</strong></li>
<li>In Python 3, you dont need to write that.</li>
</ol>
<h3 id="Property"><a href="#Property" class="headerlink" title="Property"></a>Property</h3><p>Python 里一个很厉害的地方就在于存在 property, 这个概念介于 method 和 attribute 中间。用法就是用 “@property” 把一个 method 修饰(decorator)成 property。这样就可以用类似于调用 attribute 的方法去调用 method. 这样子得到的 property 是 read-only.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, firstname, lastname)</span>:</span></span><br><span class="line">        self.firstname = firstname</span><br><span class="line">        self.lastname = lastname</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fullname</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.firstname + <span class="string">" "</span> + self.lastname</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>joe = Person(<span class="string">"Joe"</span>, <span class="string">"Smith"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>joe.fullname</span><br><span class="line"><span class="string">'Joe Smith'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意上面不是用 joe.fullname()，如果你用了会报错</span></span><br></pre></td></tr></table></figure></p>
<p>注意 如果你试图用 joe.fullname = “John Smith” 去修改，也会报错。上面的 @property 只是定义了一个 getter, 不是 setter。setter 的定义方法如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, firstname, lastname)</span>:</span></span><br><span class="line">        self.firstname = firstname</span><br><span class="line">        self.lastname  = lastname</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fullname</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.firstname + <span class="string">" "</span> + self.lastname</span><br><span class="line"><span class="meta">    @fullname.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fullname</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        self.firstname, self.lastname = value.split(<span class="string">" "</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>joe = Person(<span class="string">"Joe"</span>, <span class="string">"Smith"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>joe.fullname</span><br><span class="line"><span class="string">"Joe Smite"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>joe.fullname = <span class="string">"John Smith"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>joe.fullname</span><br><span class="line"><span class="string">"John Smith"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="活用-property-写安全的-class"><a href="#活用-property-写安全的-class" class="headerlink" title="活用 property 写安全的 class"></a>活用 property 写安全的 class</h3><ol>
<li>property 在 python class 内部也可以调用.</li>
<li>下面的例子就在 constructor 里面调用了 price.setter</li>
<li>This implementation <mark>centralizes all reads and writes of self._price in the property, which is a useful encapsulation in general.</mark><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Final version, with modified constructor. (Constructor</span></span><br><span class="line"><span class="comment"># is different; code for getter &amp; setter is the same.)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ticket</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, price)</span>:</span></span><br><span class="line">        <span class="comment"># instead of "self._price = price"</span></span><br><span class="line">        self.price = price</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._price</span><br><span class="line"><span class="meta">    @price.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self, new_price)</span>:</span></span><br><span class="line">        <span class="comment"># Only allow positive prices.</span></span><br><span class="line">        <span class="keyword">if</span> new_price &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"Nice try"</span>)</span><br><span class="line">        self._price = new_price</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="活用-property-来-refactoring-lagacy-code"><a href="#活用-property-来-refactoring-lagacy-code" class="headerlink" title="活用 property 来 refactoring lagacy code"></a>活用 property 来 refactoring lagacy code</h3><p>使用场景：如果有一天，你想用另外的 attributes 去代替本来的 attributes，因为新的 attributes 更方便，似的你的 code 更加简洁。这个时候，万一有其他人的 code 里面直接调用了 本来的 attribute，就会出错。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 老 code</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Money</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, dollars, cents)</span>:</span></span><br><span class="line">        self.dollars = dollars</span><br><span class="line">        self.cents = cents</span><br><span class="line">    <span class="comment"># And some other methods...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新的 code</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Money</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, dollars, cents)</span>:</span></span><br><span class="line">        self.total_cents = dollars * <span class="number">100</span> + cents</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Getter and setter for dollars...</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dollars</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.total_cents // <span class="number">100</span></span><br><span class="line"><span class="meta">    @dollars.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dollars</span><span class="params">(self, new_dollars)</span>:</span></span><br><span class="line">        self.total_cents = <span class="number">100</span> * new_dollars + self.cents</span><br><span class="line"></span><br><span class="line">    <span class="comment"># And for cents.</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cents</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.total_cents % <span class="number">100</span></span><br><span class="line"><span class="meta">    @cents.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cents</span><span class="params">(self, new_cents)</span>:</span></span><br><span class="line">        self.total_cents = <span class="number">100</span> * self.dollars + new_cents</span><br></pre></td></tr></table></figure>
<p>看出来了吧，python 里面 refactoring code 很方便，对于 java 程序员来说，情况往往是下面这个样子的：</p>
<ol>
<li>A newbie developer starts writing Java classes. They want to expose some state, so create public member variables.</li>
<li>They use this class everywhere. Other developers use it too.</li>
<li>One day, they want to change the name or type of that member variable, or even do away with it entirely (like what we did with Money).</li>
<li>But that would break everyone’s code. So they can’t.</li>
</ol>
<p>Because of this, Java developers quickly learn to make all their variables private by default - proactively creating getters and setters for every publicly<br>exposed chunk of data. They realize this boilerplate is far less painful than the<br>alternative, because if everyone must use the public getters and setters to<br>begin with, you always have the freedom to make internal changes later.</p>
<h3 id="Factory-Patterns"><a href="#Factory-Patterns" class="headerlink" title="Factory Patterns"></a>Factory Patterns</h3><p>参见单独的文章</p>
<h3 id="Observer-Patterns"><a href="#Observer-Patterns" class="headerlink" title="Observer Patterns"></a>Observer Patterns</h3><p>参见单独的文章</p>
<h3 id="Magic-method-实际就是一些运算符的定义，重载"><a href="#Magic-method-实际就是一些运算符的定义，重载" class="headerlink" title="Magic method (实际就是一些运算符的定义，重载)"></a>Magic method (实际就是一些运算符的定义，重载)</h3><p>常见的 magic methods:</p>
<ul>
<li>__add__               a + b</li>
<li>__sub__               a - b</li>
<li>__mul__               a * b</li>
<li>__truediv__           a / b (floating-point division)</li>
<li>__mod__               a % b</li>
<li>__pow__               a ** b</li>
<li>也可以定义 bit 操作</li>
<li>__lshift__</li>
<li>__rshift__</li>
<li>__and__</li>
<li>__xor__</li>
<li>__or__<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Angle</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        self.value = value % <span class="number">360</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> Angle(self.value + other.value)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 有了上面的定义，我们就可以执行下面的语句了。</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>total = Angle(<span class="number">30</span>) + Angle(<span class="number">45</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>total.value</span><br><span class="line"></span><br><span class="line"><span class="comment"># 本质上，python 把 a + b 看成 a.__add__(b)</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>__str__ 操作符: print() function, str() 和 string formating 操作会调用这个 magic method<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&#123;&#125; degrees'</span>.format(self.value)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(Angle(<span class="number">30</span>))</span><br><span class="line"><span class="number">30</span> degrees</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(Angle(<span class="number">45</span>))</span><br><span class="line"><span class="string">'45 degrees'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;&#125;'</span>.format(Angle(<span class="number">30</span>) + Angle(<span class="number">45</span>)))</span><br><span class="line"><span class="number">75</span> degrees</span><br></pre></td></tr></table></figure></p>
<p>__repr__ 方法：这个方法的输出是 用来重新生成这个 object。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Angle(&#123;&#125;)'</span>.format(self.value)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>repr(Angle(<span class="number">30</span>))</span><br><span class="line"><span class="string">'Angle(30)'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;!r&#125;'</span>.format(Angle(<span class="number">30</span>) + Angle(<span class="number">45</span>)))</span><br><span class="line">Angle(<span class="number">75</span>)</span><br></pre></td></tr></table></figure></p>
<p>比较运算符：</p>
<ul>
<li>__eq__</li>
<li>__ne__</li>
<li>__lt__</li>
<li>__le__</li>
<li>__gt__</li>
<li>__ge__</li>
</ul>
<h2 id="资料来源"><a href="#资料来源" class="headerlink" title="资料来源"></a>资料来源</h2><p>《OOD Powerful Python》</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/23/机器学习的损失函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng Xing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/23/机器学习的损失函数/" itemprop="url">机器学习的损失函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-23T17:15:07-08:00">
                2017-11-23
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/23/机器学习的损失函数/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/23/机器学习的损失函数/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/08/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng Xing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/08/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-08T20:23:30-08:00">
                2017-11-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/08/hello-world/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/08/hello-world/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
<h3 id="Some-useful-sites"><a href="#Some-useful-sites" class="headerlink" title="Some useful sites"></a>Some useful sites</h3><ol>
<li><a href="http://ibruce.info/2013/11/22/hexo-your-blog/" target="_blank" rel="external">Start Instruction 1</a></li>
<li><a href="https://linghucong.js.org/2016/04/15/2016-04-15-hexo-github-pages-blog/" target="_blank" rel="external">Start Instruction 2</a></li>
<li><a href="http://www.jianshu.com/p/5973c05d7100" target="_blank" rel="external">Additional Functionalities</a></li>
<li><a href="http://ibruce.info/2013/11/22/hexo-your-blog/" target="_blank" rel="external">Additional Functionalities 2</a></li>
<li><a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" rel="external">Theme Yelee</a></li>
<li><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">Theme next</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/08/First-Day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng Xing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/08/First-Day/" itemprop="url">First Day</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-08T14:15:05-08:00">
                2017-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/beginning/" itemprop="url" rel="index">
                    <span itemprop="name">beginning</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/08/First-Day/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/08/First-Day/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="This-is-just-a-test"><a href="#This-is-just-a-test" class="headerlink" title="This is just a test!"></a>This is just a test!</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Zheng Xing" />
            
              <p class="site-author-name" itemprop="name">Zheng Xing</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zheng Xing</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://githubio-2.disqus.com/count.js" async></script>
    

    

  




	





  











<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>



  





  

  

  

  
  

  

  

  

</body>
</html>
